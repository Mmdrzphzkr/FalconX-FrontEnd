"use client";
import { useSelector, useDispatch } from "react-redux";
import { useEffect } from "react";
import FetchHeaderItems from "../../redux/actions/a.header";
import { usePathname } from "next/navigation";
import Link from "next/link";

const Header = () => {
  const dispatch = useDispatch();
  const pathname = usePathname();

  const isLoginPage = pathname === "/login";

  useEffect(() => {
    dispatch(FetchHeaderItems());
  }, [dispatch]);

  const { items } = useSelector((state) => state.header);
  return (
    <header className="w-full">
      <nav className="bg-[#18191D] min-h-fit flex justify-start items-center w-full px-[16px] py-[8px]">
        <div className="logo__container">
          <Link href="/">
            <svg
              width="173"
              height="49"
              viewBox="0 0 173 49"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M44.9112 15.6458L41.3783 20.4147C40.7032 21.3239 39.8205 22.0634 38.8017 22.5732C37.7829 23.0831 36.6567 23.3489 35.5144 23.3491H29.4791C28.3361 23.3491 27.2092 23.6148 26.1897 24.1247C25.1702 24.6347 24.2869 25.3745 23.6114 26.2843L17.5408 34.479C16.9483 35.2803 15.7059 35.1954 15.2336 34.317L12.489 29.2439L20.3945 18.5831C21.0693 17.6733 21.9519 16.9333 22.9707 16.423C23.9895 15.9126 25.1158 15.6464 26.2584 15.6458H44.9112Z"
                fill="#1A80E6"
              />
              <path
                d="M30.2494 25.0809H35.9334L32.3994 29.8487C31.7245 30.7581 30.8419 31.4978 29.8231 32.0078C28.8044 32.5179 27.6782 32.7838 26.5359 32.7842H20.8525L24.3858 28.0161C25.0608 27.1067 25.9435 26.3671 26.9622 25.8572C27.9809 25.3472 29.1071 25.0813 30.2494 25.0809Z"
                fill="#1A80E6"
              />
              <path
                d="M17.5837 19.648L11.6379 27.6646L11.6226 27.6337C11.5289 27.4487 11.4351 27.2715 11.3375 27.1058L11.3257 27.0903C9.40114 23.9086 6.01247 24.759 3.70526 26.2777C3.35395 26.5088 2.93224 26.1002 3.14693 25.746L4.72433 23.1383C5.36959 22.0739 6.28356 21.1928 7.37698 20.5811C8.47041 19.9694 9.70591 19.6479 10.9629 19.648H17.5837Z"
                fill="#1A80E6"
              />
              <path
                d="M57.848 34V17.248H68.96V20.488H61.496V23.92H67.856V27.136H61.496V34H57.848ZM80.0461 34C79.4061 34 78.8701 33.8 78.4381 33.4C78.0221 33 77.7581 32.464 77.6461 31.792H77.5021C77.3101 32.608 76.8861 33.232 76.2301 33.664C75.5741 34.08 74.7661 34.288 73.8061 34.288C72.5421 34.288 71.5741 33.952 70.9021 33.28C70.2301 32.608 69.8941 31.72 69.8941 30.616C69.8941 29.288 70.3741 28.304 71.3341 27.664C72.3101 27.008 73.6301 26.68 75.2941 26.68H77.2861V25.888C77.2861 25.28 77.1261 24.8 76.8061 24.448C76.4861 24.08 75.9501 23.896 75.1981 23.896C74.4941 23.896 73.9341 24.048 73.5181 24.352C73.1021 24.656 72.7581 25 72.4861 25.384L70.3741 23.512C70.8861 22.76 71.5261 22.176 72.2941 21.76C73.0781 21.328 74.1341 21.112 75.4621 21.112C77.2541 21.112 78.5981 21.504 79.4941 22.288C80.3901 23.072 80.8381 24.216 80.8381 25.72V31.24H82.0141V34H80.0461ZM75.1261 31.816C75.7181 31.816 76.2221 31.688 76.6381 31.432C77.0701 31.176 77.2861 30.76 77.2861 30.184V28.696H75.5581C74.1661 28.696 73.4701 29.168 73.4701 30.112V30.472C73.4701 30.936 73.6141 31.28 73.9021 31.504C74.1901 31.712 74.5981 31.816 75.1261 31.816ZM87.9262 34C86.7102 34 85.8142 33.704 85.2382 33.112C84.6782 32.52 84.3982 31.664 84.3982 30.544V16.24H87.9502V31.24H89.5342V34H87.9262ZM96.7518 34.288C95.8078 34.288 94.9678 34.136 94.2318 33.832C93.4958 33.512 92.8798 33.072 92.3838 32.512C91.8878 31.936 91.5118 31.24 91.2558 30.424C90.9998 29.608 90.8718 28.696 90.8718 27.688C90.8718 26.68 90.9998 25.776 91.2558 24.976C91.5118 24.16 91.8878 23.464 92.3838 22.888C92.8798 22.312 93.4958 21.872 94.2318 21.568C94.9678 21.264 95.8078 21.112 96.7518 21.112C98.0318 21.112 99.0958 21.4 99.9438 21.976C100.808 22.552 101.424 23.36 101.792 24.4L98.9118 25.648C98.7998 25.168 98.5678 24.76 98.2158 24.424C97.8638 24.088 97.3758 23.92 96.7518 23.92C96.0318 23.92 95.4878 24.16 95.1198 24.64C94.7518 25.104 94.5678 25.736 94.5678 26.536V28.888C94.5678 29.688 94.7518 30.32 95.1198 30.784C95.4878 31.248 96.0318 31.48 96.7518 31.48C97.3918 31.48 97.8958 31.312 98.2638 30.976C98.6478 30.624 98.9278 30.168 99.1038 29.608L101.864 30.808C101.448 32.008 100.8 32.888 99.9198 33.448C99.0558 34.008 97.9998 34.288 96.7518 34.288ZM109.057 34.288C108.129 34.288 107.297 34.136 106.561 33.832C105.841 33.528 105.225 33.088 104.713 32.512C104.217 31.936 103.833 31.24 103.561 30.424C103.289 29.608 103.153 28.696 103.153 27.688C103.153 26.68 103.289 25.768 103.561 24.952C103.833 24.136 104.217 23.448 104.713 22.888C105.225 22.312 105.841 21.872 106.561 21.568C107.297 21.264 108.129 21.112 109.057 21.112C109.985 21.112 110.809 21.264 111.529 21.568C112.265 21.872 112.881 22.312 113.377 22.888C113.889 23.448 114.281 24.136 114.553 24.952C114.825 25.768 114.961 26.68 114.961 27.688C114.961 28.696 114.825 29.608 114.553 30.424C114.281 31.24 113.889 31.936 113.377 32.512C112.881 33.088 112.265 33.528 111.529 33.832C110.809 34.136 109.985 34.288 109.057 34.288ZM109.057 31.48C109.761 31.48 110.305 31.264 110.689 30.832C111.073 30.4 111.265 29.784 111.265 28.984V26.416C111.265 25.616 111.073 25 110.689 24.568C110.305 24.136 109.761 23.92 109.057 23.92C108.353 23.92 107.809 24.136 107.425 24.568C107.041 25 106.849 25.616 106.849 26.416V28.984C106.849 29.784 107.041 30.4 107.425 30.832C107.809 31.264 108.353 31.48 109.057 31.48ZM117.492 34V21.4H121.044V23.536H121.188C121.412 22.88 121.804 22.312 122.364 21.832C122.924 21.352 123.7 21.112 124.692 21.112C125.988 21.112 126.964 21.544 127.62 22.408C128.292 23.272 128.628 24.504 128.628 26.104V34H125.076V26.392C125.076 25.576 124.948 24.976 124.692 24.592C124.436 24.192 123.98 23.992 123.324 23.992C123.036 23.992 122.756 24.032 122.484 24.112C122.212 24.176 121.964 24.288 121.74 24.448C121.532 24.608 121.364 24.808 121.236 25.048C121.108 25.272 121.044 25.536 121.044 25.84V34H117.492ZM145.901 34H141.677L138.053 27.832H137.981L134.453 34H130.517L135.893 25.336L130.781 17.248H135.029L138.293 22.912H138.365L141.677 17.248H145.613L140.453 25.408L145.901 34Z"
                fill="#1A80E6"
              />
              <line
                x1="172.25"
                y1="8"
                x2="172.25"
                y2="41"
                stroke="#353945"
                stroke-width="0.5"
              />
            </svg>
          </Link>
        </div>
        {!isLoginPage ? (
          <div className="menu-items__container flex justify-start w-full">
            {items?.data?.map((item) => (
              <div key={item.id} className="mx-2 p-2">
                <Link href={item.Menu.Url}>{item.Menu.Name}</Link>
              </div>
            )) || <div>No menu items available</div>}
          </div>
        ) : null}
        {!isLoginPage ? (
          <div className="search-bar__container flex-1">
            <input type="text" placeholder="Search..." />
          </div>
        ) : null}
      </nav>
    </header>
  );
};

export default Header;
